# DandoriScheduler システム詳細報告書

## 📋 エグゼクティブサマリー

**プロジェクト名**: DandoriScheduler（ダンドリスケジューラー）  
**バージョン**: 1.0.0  
**最終更新日**: 2025年8月13日  
**開発環境**: Next.js 14.1.0 + TypeScript + Prisma  
**デプロイ環境**: Vercel  
**現在のステータス**: デモ版稼働中（モックデータ使用）

## 🏗️ システム概要

DandoriSchedulerは、工事現場の職人スケジュール管理を中心とした統合管理システムです。元請会社が職人の手配、現場管理、作業報告、在庫管理などを一元的に管理できるプラットフォームとして設計されています。

### 主要機能
- 📅 スケジュール管理（カレンダービュー）
- 👷 職人管理（15人のプロファイル、スキル、資格管理）
- 🏢 現場管理（複数現場の同時管理）
- 📝 作業報告書（デジタル化、承認フロー）
- 📦 在庫管理（部材・機器の在庫追跡）
- 🔔 リアルタイム通知システム
- 📊 ダッシュボード（売上分析、稼働率分析）

## 🔧 技術スタック

### フロントエンド
- **フレームワーク**: Next.js 14.1.0 (App Router)
- **言語**: TypeScript 5.x
- **スタイリング**: Tailwind CSS 3.4.17
- **UI ライブラリ**: カスタムコンポーネント + Lucide Icons
- **状態管理**: React Context API (AuthContext)

### バックエンド（設計済み・未実装）
- **ORM**: Prisma 6.13.0
- **データベース**: PostgreSQL（スキーマ定義済み）
- **認証**: bcryptjs（実装準備済み）

### デプロイメント
- **プラットフォーム**: Vercel
- **CI/CD**: Vercel自動デプロイ
- **現在のURL**: https://air-conditioning-scheduler-ce7y5xgad-kosukes-projects-c6ad92ba.vercel.app

## 📊 データモデル

### 主要エンティティ

1. **User（ユーザー）**
   - 管理者、マネージャー、親方、子方の4つのロール
   - 会社所属、プロファイル情報

2. **Company（会社）**
   - 元請会社の情報管理
   - 複数の現場、ユーザーを管理

3. **Site（現場）**
   - 工事現場の情報（住所、顧客情報）
   - 位置情報（緯度経度）対応

4. **Event（予定・イベント）**
   - 工事予定の詳細情報
   - ステータス管理（提案中、確定、完了など7段階）
   - 職人アサイン管理

5. **WorkerProfile（職人プロファイル）**
   - スキル・資格情報
   - 対応可能エリア・時間帯
   - 保険情報
   - 評価・実績

6. **WorkReport（作業報告書）**
   - 作業内容、時間記録
   - 写真・ドキュメント添付
   - 承認フロー

7. **Inventory（在庫）**
   - 部材・機器管理
   - 在庫数量、最小在庫アラート
   - バーコード対応

## 🎯 実装状況

### ✅ 実装済み機能

#### フロントエンド
- ランディングページ
- デモログイン画面（3種類のロール）
- カレンダービュー（月/週/日切り替え）
- 職人一覧・詳細画面
- 作業報告書作成・閲覧
- 在庫管理画面
- 通知パネル（優先度別）
- レスポンシブデザイン（モバイル対応）

#### データ
- 包括的なモックデータ
  - 60+ イベント（3ヶ月分）
  - 15人の職人（詳細プロファイル付き）
  - 50+ 職人スケジュール
  - 30件の作業報告書
  - 25件の予定変更申請
  - 15種類の在庫アイテム

### 🚧 未実装機能

#### 優先度：高
1. **データベース接続**
   - PostgreSQL接続設定
   - Prismaマイグレーション実行
   - シードデータ投入

2. **認証システム**
   - 実際のログイン機能
   - セッション管理
   - パスワードリセット

3. **API エンドポイント**
   - CRUD操作用API
   - データ検証
   - エラーハンドリング

#### 優先度：中
4. **ファイルアップロード**
   - 作業報告書の写真アップロード
   - ドキュメント管理
   - 画像圧縮・最適化

5. **リアルタイム機能**
   - WebSocket/SSE実装
   - リアルタイム通知
   - 同時編集対応

6. **検索・フィルタリング**
   - 高度な検索機能
   - 複数条件フィルタ
   - ソート機能

#### 優先度：低
7. **レポート機能**
   - PDF出力
   - Excel出力
   - グラフ・チャート生成

8. **外部連携**
   - Google Calendar連携
   - LINE通知
   - 会計システム連携

## 🔍 現在の制限事項

1. **データ永続化なし**
   - すべてのデータはモックデータ
   - リロードでデータリセット

2. **認証なし**
   - デモユーザーでのみ動作
   - 実際のログイン機能なし

3. **ファイル操作不可**
   - 画像アップロード未実装
   - ドキュメント管理未実装

4. **通知は静的**
   - リアルタイム通知なし
   - プッシュ通知なし

## 💡 推奨される次のステップ

### フェーズ1：基盤整備（1-2週間）
1. PostgreSQLデータベースセットアップ
2. Prismaマイグレーション実行
3. 基本的なCRUD API実装
4. 認証システム実装（NextAuth.js推奨）

### フェーズ2：コア機能強化（2-3週間）
1. ファイルアップロード機能
2. 検索・フィルタリング機能
3. データ検証・エラーハンドリング
4. パフォーマンス最適化

### フェーズ3：付加価値機能（3-4週間）
1. リアルタイム通知
2. レポート生成機能
3. 外部サービス連携
4. 分析ダッシュボード強化

## 🎨 UI/UXの特徴

- **カラースキーム**: ブルーグラデーション（#1e40af → #3b82f6）
- **レスポンシブ対応**: モバイル、タブレット、デスクトップ
- **アクセシビリティ**: WCAG 2.1 Level AA準拠を目標
- **日本語最適化**: 日本の建設業界用語に対応

## 📈 ビジネスメトリクス（想定）

- **対象市場**: 中小規模の空調設備工事会社
- **管理可能規模**: 
  - 職人数: 50人まで
  - 同時現場数: 20箇所
  - 月間イベント数: 500件

## 🔐 セキュリティ考慮事項

- パスワードハッシュ化（bcrypt）
- HTTPS通信
- CSRF対策
- XSS対策
- SQLインジェクション対策（Prisma ORM使用）

## 📝 開発メモ

### 既知の問題
- AuthProviderの重複エラー（layout.tsxでのみ使用）
- ポート3000-3001が使用中の場合、3002で起動

### 開発コマンド
```bash
# 開発サーバー
npm run dev

# ビルド
npm run build

# デプロイ
vercel --prod

# データベース関連
npm run db:migrate
npm run db:seed
npm run db:studio
```

## 🤝 今後の検討事項

1. **マルチテナント対応**
   - 複数の元請会社対応
   - データ分離
   - カスタマイズ機能

2. **AI機能統合**
   - スケジュール最適化
   - 需要予測
   - 異常検知

3. **IoT連携**
   - 現場センサー連携
   - GPS追跡
   - 機器モニタリング

4. **モバイルアプリ**
   - React Native版
   - オフライン対応
   - プッシュ通知

---

**作成者**: Claude  
**作成日**: 2025年8月13日  
**次回レビュー予定**: GPTとの協議後に決定